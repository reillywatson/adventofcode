package main

import (
	"fmt"
	"maps"
	"slices"
	"strings"
)

type point struct {
	x int
	y int
}

func main() {
	var points []point
	for _, line := range strings.Split(input, "\n") {
		var p point
		fmt.Sscanf(line, "%d,%d", &p.x, &p.y)
		points = append(points, p)
	}
	xs, ys, xIndex, yIndex, grid := buildCompressedGrid(points)

	var maxArea int
	for i := 0; i < len(points); i++ {
		for j := i + 1; j < len(points); j++ {
			dx := abs(points[i].x-points[j].x) + 1
			dy := abs(points[i].y-points[j].y) + 1
			area := dx * dy
			if area > maxArea {
				if rectInPolygon(min(points[i].x, points[j].x), min(points[i].y, points[j].y), max(points[i].x, points[j].x), max(points[i].y, points[j].y), xs, ys, xIndex, yIndex, grid) {
					maxArea = area
				}
			}
		}
	}
	fmt.Println(maxArea)
}

func inPolygon(pg []point, p point) bool {
	inside := false
	for i := 0; i < len(pg); i++ {
		a := pg[i]
		b := pg[(i+1)%len(pg)]
		if onSegment(a, b, p) {
			return true
		}
		if (a.y > p.y) != (b.y > p.y) {
			cross := float64(b.x-a.x)*float64(p.y-a.y)/float64(b.y-a.y) + float64(a.x)
			if float64(p.x) < cross {
				inside = !inside
			}
		}
	}
	return inside
}

func onSegment(a, b, p point) bool {
	cross := (b.x-a.x)*(p.y-a.y) - (b.y-a.y)*(p.x-a.x)
	if cross != 0 {
		return false
	}
	minX := min(a.x, b.x)
	maxX := max(a.x, b.x)
	minY := min(a.y, b.y)
	maxY := max(a.y, b.y)
	return p.x >= minX && p.x <= maxX && p.y >= minY && p.y <= maxY
}

func buildCompressedGrid(poly []point) ([]int, []int, map[int]int, map[int]int, [][]bool) {
	if len(poly) == 0 {
		return nil, nil, nil, nil, nil
	}
	xSet := make(map[int]struct{}, len(poly))
	ySet := make(map[int]struct{}, len(poly))
	for _, p := range poly {
		xSet[p.x] = struct{}{}
		ySet[p.y] = struct{}{}
	}
	xs := slices.Sorted(maps.Keys(xSet))
	ys := slices.Sorted(maps.Keys(ySet))
	if len(xs) < 2 || len(ys) < 2 {
		return xs, ys, nil, nil, nil
	}
	xIndex := make(map[int]int, len(xs))
	for i, x := range xs {
		xIndex[x] = i
	}
	yIndex := make(map[int]int, len(ys))
	for i, y := range ys {
		yIndex[y] = i
	}
	grid := make([][]bool, len(xs)-1)
	for i := 0; i < len(xs)-1; i++ {
		width := xs[i+1] - xs[i]
		grid[i] = make([]bool, len(ys)-1)
		if width == 0 {
			continue
		}
		sampleX := midpoint(xs[i], xs[i+1])
		for j := 0; j < len(ys)-1; j++ {
			height := ys[j+1] - ys[j]
			if height == 0 {
				continue
			}
			sampleY := midpoint(ys[j], ys[j+1])
			grid[i][j] = inPolygon(poly, point{sampleX, sampleY})
		}
	}
	return xs, ys, xIndex, yIndex, grid
}

func midpoint(a, b int) int {
	return a + (b-a)/2
}

func rectInPolygon(x0, y0, x1, y1 int, xs, ys []int, xIndex, yIndex map[int]int, grid [][]bool) bool {
	if x0 >= x1 || y0 >= y1 {
		return false
	}
	colStart, ok := xIndex[x0]
	if !ok {
		return false
	}
	colEnd, ok := xIndex[x1]
	if !ok {
		return false
	}
	rowStart, ok := yIndex[y0]
	if !ok {
		return false
	}
	rowEnd, ok := yIndex[y1]
	if !ok {
		return false
	}
	if colStart >= len(xs)-1 || rowStart >= len(ys)-1 {
		return false
	}
	for c := colStart; c < colEnd; c++ {
		if c >= len(grid) {
			return false
		}
		for r := rowStart; r < rowEnd; r++ {
			if r >= len(grid[c]) || !grid[c][r] {
				return false
			}
		}
	}
	return true
}

func abs(v int) int {
	if v < 0 {
		return -v
	}
	return v
}

var sampleInput = `7,1
11,1
11,7
9,7
9,5
2,5
2,3
7,3`

var input = `98201,50069
98201,51291
98234,51291
98234,52496
97862,52496
97862,53680
97426,53680
97426,54964
98133,54964
98133,56085
97239,56085
97239,57278
97057,57278
97057,58605
97621,58605
97621,59791
97303,59791
97303,60984
97027,60984
97027,62208
96875,62208
96875,63162
95751,63162
95751,64324
95428,64324
95428,65552
95287,65552
95287,66616
94668,66616
94668,68009
94899,68009
94899,68903
93877,68903
93877,69903
93154,69903
93154,71156
92974,71156
92974,72053
92072,72053
92072,73194
91647,73194
91647,74234
91034,74234
91034,75373
90577,75373
90577,76243
89695,76243
89695,77242
89020,77242
89020,78420
88587,78420
88587,79590
88114,79590
88114,80518
87318,80518
87318,81145
86175,81145
86175,82150
85483,82150
85483,83090
84711,83090
84711,84054
83956,84054
83956,84990
83166,84990
83166,85597
82068,85597
82068,86091
80893,86091
80893,87592
80563,87592
80563,88185
79470,88185
79470,88625
78277,88625
78277,89365
77315,89365
77315,89883
76203,89883
76203,90666
75266,90666
75266,91021
74069,91021
74069,91666
73048,91666
73048,92224
71979,92224
71979,92897
70966,92897
70966,93519
69920,93519
69920,94338
68951,94338
68951,94471
67690,94471
67690,95015
66598,95015
66598,94997
65308,94997
65308,95347
64156,95347
64156,95934
63072,95934
63072,96304
61918,96304
61918,96492
60718,96492
60718,96988
59586,96988
59586,97678
58474,97678
58474,96987
57129,96987
57129,98106
56056,98106
56056,97987
54810,97987
54810,98021
53587,98021
53587,98198
52375,98198
52375,98123
51150,98123
51150,97637
49931,97637
49931,98117
48711,98117
48711,98320
47480,98320
47480,98305
46251,98305
46251,97625
45088,97625
45088,97954
43822,97954
43822,97449
42661,97449
42661,97094
41489,97094
41489,96721
40328,96721
40328,96366
39170,96366
39170,96460
37899,96460
37899,95941
36783,95941
36783,95947
35511,95947
35511,95821
34264,95821
34264,95451
33092,95451
33092,94518
32143,94518
32143,93663
31188,93663
31188,93305
30026,93305
30026,92774
28941,92774
28941,92223
27867,92223
27867,92286
26449,92286
26449,91018
25774,91018
25774,90967
24382,90967
24382,90058
23516,90058
23516,88978
22787,88978
22787,89036
21248,89036
21248,87783
20666,87783
20666,87161
19610,87161
19610,86090
18927,86090
18927,85644
17703,85644
17703,84619
16997,84619
16997,83670
16233,83670
16233,83072
15107,83072
15107,81823
14674,81823
14674,81218
13529,81218
13529,80262
12776,80262
12776,79386
11923,79386
11923,78404
11201,78404
11201,77496
10373,77496
10373,76477
9699,76477
9699,75263
9339,75263
9339,74480
8277,74480
8277,73171
8111,73171
8111,72264
7226,72264
7226,71062
6904,71062
6904,69792
6759,69792
6759,68967
5625,68967
5625,67661
5600,67661
5600,66736
4610,66736
4610,65459
4558,65459
4558,64448
3718,64448
3718,63166
3733,63166
3733,62057
3154,62057
3154,60868
2855,60868
2855,59658
2655,59658
2655,58445
2489,58445
2489,57190
2611,57190
2611,56039
2029,56039
2029,54832
1792,54832
1792,53597
1841,53597
1841,52386
1574,52386
1574,51158
1560,51158
1560,50063
94601,50063
94601,48706
1675,48706
1675,47488
1843,47488
1843,46312
2476,46312
2476,45070
2209,45070
2209,43876
2460,43876
2460,42590
2094,42590
2094,41447
2672,41447
2672,40183
2576,40183
2576,39124
3437,39124
3437,37782
3089,37782
3089,36815
4170,36815
4170,35578
4266,35578
4266,34540
4981,34540
4981,33110
4596,33110
4596,31987
5092,31987
5092,30938
5756,30938
5756,29836
6281,29836
6281,28764
6865,28764
6865,27628
7321,27628
7321,26511
7824,26511
7824,25702
8859,25702
8859,24579
9346,24579
9346,23540
9977,23540
9977,22649
10824,22649
10824,21328
11071,21328
11071,20465
11957,20465
11957,19688
12934,19688
12934,18858
13829,18858
13829,17605
14247,17605
14247,17184
15577,17184
15577,15908
16006,15908
16006,15523
17321,15523
17321,14286
17826,14286
17826,13447
18711,13447
18711,12439
19462,12439
19462,11795
20514,11795
20514,11383
21728,11383
21728,10177
22367,10177
22367,10030
23739,10030
23739,8944
24491,8944
24491,8323
25546,8323
25546,7927
26726,7927
26726,7454
27853,7454
27853,6533
28755,6533
28755,6357
30023,6357
30023,6315
31327,6315
31327,5328
32230,5328
32230,5210
33484,5210
33484,4188
34414,4188
34414,4305
35735,4305
35735,3569
36786,3569
36786,3893
38132,3893
38132,3066
39179,3066
39179,2631
40336,2631
40336,3033
41651,3033
41651,2365
42772,2365
42772,2357
44001,2357
44001,1757
45164,1757
45164,1784
46397,1784
46397,2098
47639,2098
47639,2091
48854,2091
48854,2492
50068,2492
50068,2437
51273,2437
51273,1716
52518,1716
52518,1836
53737,1836
53737,2314
54918,2314
54918,2630
56101,2630
56101,2930
57279,2930
57279,2390
58603,2390
58603,2671
59796,2671
59796,3323
60901,3323
60901,3234
62180,3234
62180,3750
63305,3750
63305,4270
64419,4270
64419,4920
65480,4920
65480,5164
66678,5164
66678,5132
67997,5132
67997,6372
68795,6372
68795,6101
70246,6101
70246,6487
71421,6487
71421,7318
72372,7318
72372,7635
73593,7635
73593,9018
74203,9018
74203,9124
75559,9124
75559,9646
76678,9646
76678,10393
77651,10393
77651,11686
78218,11686
78218,12340
79237,12340
79237,12512
80656,12512
80656,13724
81231,13724
81231,14301
82345,14301
82345,15071
83297,15071
83297,16144
83952,16144
83952,17040
84772,17040
84772,17542
86028,17542
86028,19002
86212,19002
86212,19957
86952,19957
86952,20594
88101,20594
88101,21560
88845,21560
88845,22490
89645,22490
89645,23588
90200,23588
90200,24451
91119,24451
91119,25749
91331,25749
91331,26959
91651,26959
91651,27880
92493,27880
92493,28819
93336,28819
93336,30053
93576,30053
93576,31030
94378,31030
94378,32279
94546,32279
94546,33316
95246,33316
95246,34695
94986,34695
94986,35588
96164,35588
96164,36850
96204,36850
96204,37963
96762,37963
96762,39298
96420,39298
96420,40378
97159,40378
97159,41646
96996,41646
96996,42832
97242,42832
97242,44065
97132,44065
97132,45225
97634,45225
97634,46413
98004,46413
98004,47660
97467,47660
97467,48854
97897,48854
97897,50069`
